{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n    // 1. Инициализация Lenis (Smooth Scroll)\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        direction: 'vertical',\n        smooth: true,\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // GSAP Setup\n    gsap.registerPlugin(ScrollTrigger);\n\n    // 2. Мобильное меню\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.header__nav');\n    const links = document.querySelectorAll('.header__link');\n\n    const toggleMenu = () => {\n        nav.classList.toggle('is-open');\n        burger.classList.toggle('is-active');\n    };\n\n    burger.addEventListener('click', toggleMenu);\n    links.forEach(link => link.addEventListener('click', () => {\n        if(nav.classList.contains('is-open')) toggleMenu();\n    }));\n\n    // 3. Анимации (GSAP)\n    \n    // HERO: Split Type Animation\n    if (document.querySelector('#hero-text')) {\n        // Проверяем, загрузилась ли библиотека SplitType\n        try {\n            const typeSplit = new SplitType('#hero-text', { types: 'lines, words, chars' });\n            \n            const tl = gsap.timeline();\n            \n            tl.from(typeSplit.chars, {\n                y: 100,\n                opacity: 0,\n                rotation: 10,\n                duration: 0.8,\n                stagger: 0.02,\n                ease: \"back.out(1.7)\"\n            })\n            .from('.hero__desc', { opacity: 0, y: 20, duration: 0.6 }, \"-=0.4\")\n            .from('.hero__actions', { opacity: 0, y: 20, duration: 0.6 }, \"-=0.4\")\n            .from('.hero__visual', { opacity: 0, scale: 0.8, duration: 0.8 }, \"-=0.6\");\n        } catch (e) {\n            console.warn(\"SplitType not loaded or error:\", e);\n        }\n    }\n\n    // GENERAL: Fade Up Sections\n    const sections = document.querySelectorAll('section');\n    sections.forEach(section => {\n        gsap.fromTo(section.children, \n            { y: 50, opacity: 0 },\n            {\n                y: 0,\n                opacity: 1,\n                duration: 0.8,\n                stagger: 0.1,\n                scrollTrigger: {\n                    trigger: section,\n                    start: \"top 80%\",\n                }\n            }\n        );\n    });\n\n    // 4. Форма контактов (Валидация + AJAX)\n    const form = document.getElementById('contactForm');\n    const phoneInput = document.getElementById('phone');\n    const statusDiv = document.getElementById('formStatus');\n    const policyCheckbox = document.getElementById('policy');\n    const policyLabel = document.querySelector('label[for=\"policy\"]');\n\n    // Разрешаем вводить только цифры в телефон\n    phoneInput.addEventListener('input', (e) => {\n        e.target.value = e.target.value.replace(/\\D/g, '');\n    });\n\n    // Убираем ошибку чекбокса при клике\n    policyCheckbox.addEventListener('change', () => {\n        if (policyCheckbox.checked) {\n            policyLabel.parentElement.style.color = ''; // Сброс цвета\n        }\n    });\n\n    form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        let isValid = true;\n        \n        // Очистка классов ошибок\n        document.querySelectorAll('.form-group').forEach(g => g.classList.remove('error'));\n        policyLabel.parentElement.style.color = '';\n\n        // --- ВАЛИДАЦИЯ ПОЛЕЙ ---\n        const name = document.getElementById('name');\n        const email = document.getElementById('email');\n        const captcha = document.getElementById('captcha');\n\n        // Имя\n        if (name.value.trim().length < 2) {\n            name.parentElement.classList.add('error');\n            isValid = false;\n        }\n        \n        // Email\n        if (!email.value.includes('@') || !email.value.includes('.')) {\n            email.parentElement.classList.add('error');\n            isValid = false;\n        }\n\n        // Телефон (минимум 10 цифр)\n        if (phoneInput.value.length < 10) {\n            phoneInput.parentElement.classList.add('error');\n            isValid = false;\n        }\n\n        // Капча (5 + 3 = 8)\n        if (captcha.value.trim() !== '8') {\n            captcha.parentElement.classList.add('error');\n            alert('Неверный ответ в примере'); // Доп. уведомление\n            isValid = false;\n        }\n\n        // Чекбокс (Самое важное!)\n        if (!policyCheckbox.checked) {\n            isValid = false;\n            // Подсвечиваем текст красным\n            policyLabel.parentElement.style.color = '#ef4444'; \n            // Можно добавить легкую анимацию тряски, если нужно, но цвет достаточно заметен\n        }\n\n        // --- ОТПРАВКА ---\n        if (isValid) {\n            // Имитация отправки\n            const btn = form.querySelector('button');\n            const originalText = btn.innerHTML;\n            \n            // Блокируем кнопку\n            btn.innerHTML = '<span>Отправка...</span><i data-lucide=\"loader-2\" class=\"spin\"></i>';\n            btn.disabled = true;\n            lucide.createIcons(); // Обновляем иконку загрузки\n\n            setTimeout(() => {\n                form.reset();\n                btn.innerHTML = '<span>Отправлено!</span><i data-lucide=\"check\"></i>';\n                lucide.createIcons();\n                \n                statusDiv.innerHTML = '<span style=\"color: #4ade80\">Заявка принята. Мы свяжемся с вами.</span>';\n                \n                // Возврат кнопки в исходное состояние\n                setTimeout(() => {\n                    btn.innerHTML = originalText;\n                    btn.disabled = false;\n                    statusDiv.innerHTML = '';\n                    lucide.createIcons(); // Возвращаем иконку send\n                }, 3000);\n            }, 1500);\n        }\n    });\n\n    // 5. Cookie Popup\n    const cookiePopup = document.getElementById('cookiePopup');\n    const acceptBtn = document.getElementById('acceptCookie');\n\n    if (!localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => {\n            cookiePopup.classList.add('is-visible');\n        }, 2000);\n    }\n\n    acceptBtn.addEventListener('click', () => {\n        localStorage.setItem('cookiesAccepted', 'true');\n        cookiePopup.classList.remove('is-visible');\n    });\n\n    // 6. Инициализация иконок\n    lucide.createIcons();\n});"],"names":["lenis","raf","time","burger","nav","links","toggleMenu","link","typeSplit","e","section","form","phoneInput","statusDiv","policyCheckbox","policyLabel","isValid","g","name","email","captcha","btn","originalText","cookiePopup","acceptBtn"],"mappings":"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"}